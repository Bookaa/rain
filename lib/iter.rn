range = func(end)
  let i = 0
  return func()
    if i < end
      save i
    i = i + 1

map = func(iter, fn) -> func()
  let val = iter()
  if val != null
    return fn(val)
